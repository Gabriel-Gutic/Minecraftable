{% extends "Minecraftable/base.html" %}

{% block content %}
{% load static %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

{% if user.is_authenticated %}
    <div class="card p-4 position-absolute start-50 translate-middle-x text-center" style="max-width: 35rem; min-width: 35rem;">
        <h1 class="jumbotron-heading">Your datapacks:</h1>
        <br>
        <ul class="list-group">
            {% for datapack in datapacks %}
                <li id="datapack-item-{{datapack.id}}" class="list-group-item d-flex justify-content-between align-items-center">
                    {{datapack.name}}
                    <div>
                        <a href="/Minecraftable/datapack/{{datapack.id}}/" class="btn btn-primary">Open</a>
                        <a href="/Minecraftable/datapack/{{datapack.id}}/settings/" class="btn btn-secondary">Settings</a>
                        <a id="{{datapack.id}}-delete" class="btn btn-danger delete-button"><p id="{{datapack.id}}-name" style="display: none;">{{datapack.name}}</p>Delete</a>
                    </div>
                </li>
            {% endfor %}
            <li class="list-group-item justify-content-between align-items-center">
                <a href="/Minecraftable/datapack/create/" class="btn btn-primary">Create a new datapack</a>
            </li>
        </ul>
        
        <p id="deleted-datapack-id" style="display: none;"></p>
    </div>
{% else %}

    <div class="card p-4 position-absolute start-50 translate-middle-x text-center" style="max-width: 35rem;">
        <h1 class="jumbotron-heading">Hello!</h1>
        <p class="lead text-muted">Welcome to the Minecraftable! A very good site that allows you to create your own Minecraft recipes.</p>
        <p class="lead text-muted">Enjoy!</p>
        <p>
            <a href="/Minecraftable/login/" class="btn btn-primary my-2">Login</a>
            <a href="/Minecraftable/register/" class="btn btn-primary my-2">Create a new account</a>
        </p>
    </div>    

{% endif %}

<div class="modal fade" id="delete-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Be careful!</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div id="delete-modal-body" class="modal-body">
            </div>
            <div class="modal-footer">
                <button id="confirm-delete-button" type="button" class="btn btn-danger">Yes</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
            </div>
        </div>
    </div>
</div>

{% csrf_token %}
{% endblock content %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.0/dist/js.cookie.min.js"></script>
<script src="{% static 'js/home-page.js' %}"></script>
{% endblock scripts %}